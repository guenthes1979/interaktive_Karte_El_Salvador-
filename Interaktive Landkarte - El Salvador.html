<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<title>El Salvador â€“ Interaktive Karte (ohne GeoJSON)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
  html, body { margin:0; padding:0; height:100%; font-family: Arial, sans-serif; }
  #map { height:100%; }

  .photo-marker {
    border-radius:50%;
    border:3px solid white;
    box-shadow:0 2px 10px rgba(0,0,0,.35);
    display:block;
  }

  .legend{
    background:white;
    padding:10px;
    border-radius:10px;
    font-size:13px;
    box-shadow:0 2px 8px rgba(0,0,0,.2);
    line-height:1.35;
    position: relative;
    z-index: 2000;
  }

  .popup-img {
    width:220px;
    max-width:100%;
    border-radius:10px;
    margin-top:8px;
    display:block;
  }
</style>

</head>

<body>
<div id="map"></div>

<script>
  // ================= KARTE =================
  const map = L.map("map").fitBounds([[13.0,-90.2],[14.5,-87.6]]);

console.log("Script lÃ¤uft bis nach map âœ…");

  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    attribution:"Â© OpenStreetMap",
    maxZoom: 19
  }).addTo(map);

  // ================= LAYER =================
  const layerStaedte = L.layerGroup().addTo(map);
  const layerKultur = L.layerGroup().addTo(map);
  const layerNatur = L.layerGroup().addTo(map);
  const layerStrand = L.layerGroup().addTo(map);
  const layerWeitereBesondereOrte = L.layerGroup().addTo(map);
  const layerBesondereOrte = L.layerGroup().addTo(map);
  const layerHauptfluesse = L.layerGroup().addTo(map);
  const layerNebenfluesse = L.layerGroup().addTo(map);


  // ================= ICONS =================
  // Bildmarker mit optionaler optischer Verschiebung (dx, dy) in Pixeln
  function makeImageDivIcon(imageUrl, size = 46, dx = 0, dy = 0) {
    return L.divIcon({
      className:"",
      html: `
        <img src="${imageUrl}" class="photo-marker"
             style="width:${size}px;height:${size}px;transform:translate(${dx}px,${dy}px)">
      `,
      iconSize:[size,size],
      iconAnchor:[size/2,size],   // unten mittig
      popupAnchor:[0,-size]
    });
  }

  // Einfache Emoji-Marker als Fallback (fÃ¼r Natur/Besondere Orte, falls du willst)
  function makeEmojiIcon(emoji, bg) {
    return L.divIcon({
      className:"",
      html: `
        <div style="
          width:28px;height:28px;border-radius:999px;background:${bg};
          display:flex;align-items:center;justify-content:center;
          border:2px solid white;box-shadow:0 2px 8px rgba(0,0,0,.25);
          font-size:16px;">
          ${emoji}
        </div>`,
      iconSize:[28,28],
      iconAnchor:[14,28],
      popupAnchor:[0,-28]
    });
  }

  const iconNature = makeEmojiIcon("ğŸŒ¿", "#73d99f");
  const iconAlert  = makeEmojiIcon("â—", "#ffd166");

  // ================= POPUP =================
  function popupHTML(o){
    const img = o.imgUrl ? `<img class="popup-img" src="${o.imgUrl}" alt="${o.title}">` : "";
    return `
      <div>
        <b>${o.title}</b><br>
        <i>${o.subtitle || ""}</i><br><br>
        ${o.text || ""}
        ${img}
      </div>
    `;
  }

  // ================= DATEN =================
  const staedte = [
    {
      title:"San Salvador",
      coords:[13.6929,-89.2182],
      iconLocal:"images/San Salvador.jpg",
      subtitle:"Hauptstadt",
      text:"San Salvador ist die Hauptstadt von El Salvador â€“ Zentrum fÃ¼r Politik, Bildung und Wirtschaft.",
      imgUrl:"https://cdn.getyourguide.com/img/tour/47988c7e5b8bbf0af11e62a6ff4aefeea5a7f6de61e1c3bbe1389006ef589164.jpg/98.jpg"
    },
    {
      title:"Santa Ana",
      coords:[13.9942,-89.5597],
      iconLocal:"images/Santa Ana.jpg",
      subtitle:"Stadt im Westen",
      text:"Santa Ana ist eine wichtige Stadt im Westen. In der NÃ¤he liegt eine Vulkanregion.",
      imgUrl:"https://www.my-travelworld.de/wp-content/uploads/el_salvador_006_santa_ana_parque_la_libertad.jpg"
    },
    {
      title:"San Miguel",
      coords:[13.4833,-88.1833],
      iconLocal:"images/San Miguel.jpg",
      subtitle:"Stadt im Osten",
      text:"San Miguel ist eine groÃŸe Stadt im Osten und ein Zentrum fÃ¼r Handel und Regionalkultur.",
      imgUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRVnidkF5P_hi1khBDr9juprQ6LYOqGPTcNsw&s"
    }
  ];

  const kultur = [
    {
      title:"Joya de CerÃ©n (UNESCO)",
      coords:[13.8267,-89.3611],
      iconLocal:"images/Joya de Ceren.jpg",
      subtitle:"ArchÃ¤ologische FundstÃ¤tte",
      text:"Ein Dorf, das durch Vulkanasche erhalten blieb â€“ ein einzigartiger Blick in die Vergangenheit.",
      imgUrl:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/04/79/d3/d3/sitio-arqueologico-joya.jpg?w=900&h=500&s=1"
    },
    {
      title:"Tazumal (Chalchuapa)",
      coords:[13.9867,-89.6817],
      iconLocal:"images/Tazumal.jpg",
      subtitle:"Ruinenanlage",
      text:"Bekannte RuinenstÃ¤tte â€“ zeigt frÃ¼he groÃŸe Siedlungen und Kultur in der Region.",
      imgUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/ES_Tazumal_06_2011_2236.jpg/1200px-ES_Tazumal_06_2011_2236.jpg"
    },
    {
      title:"Ruta de las Flores (Region)",
      coords:[13.8480,-89.6620],
      iconLocal:"images/Ruta de las Flores.jpg",
      subtitle:"Kulturroute im Hochland",
      text:"Region/Route mit DÃ¶rfern, MÃ¤rkten, Kaffee und schÃ¶ner Berglandschaft.",
      imgUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ1T1fDFVIwvvMToRqZWqtLqJJysKt6JfLFWg&s",
      dx:-35, dy:-10 // â¬…ï¸ nach links verschoben
    }
  ];

  const natur = [
    {
      title:"Lago de Coatepeque",
      coords:[13.8630,-89.5480],
      iconLocal:"images/Lago de Coatepeque.jpg",
      subtitle:"Vulkanischer Kratersee",
      text:"GroÃŸer Kratersee â€“ durch vulkanische Prozesse entstanden und landschaftlich sehr beeindruckend.",
      imgUrl:"https://upload.wikimedia.org/wikipedia/commons/d/d0/Teopan.jpg",
      dx:12, dy:24   // â¡ï¸â¬‡ï¸ nach rechts & unten verschoben
    }
  ];

  const besondereOrte = [
  {
    title:"Erdbeben- & Vulkanzone",
    coords:[13.9000,-88.9000],
    subtitle:"Naturgefahren",
    text:"El Salvador liegt an einer Plattengrenze â€“ daher gibt es hÃ¤ufig Erdbeben und Vulkane.",
    iconLocal:"images/Vulkan San Vincente.jpg",      
    imgUrl:"https://images.trvl-media.com/localexpert/46416047/bb24d270-a348-48af-b3a9-d5262657acd1.jpg?impolicy=resizecrop&rw=1005&rh=565"
  }
];

const weitereBesondereOrte = [
{
    title: "Vulkan Izalco",
    coords: [13.8136, -89.6333],
    subtitle: "Junger Vulkan",
    text: "Der Vulkan Izalco entstand im 18. Jahrhundert und war wegen seiner hÃ¤ufigen AusbrÃ¼che als â€Leuchtturm des Pazifiksâ€œ bekannt.",
    iconLocal: "images/Vulkan Izalco.jpg",
    imgUrl: "https://volcanodiscovery.de/uploads/tx_volcanoes/izalco.JPG",
    dx: -25,   // â¬…ï¸ nach links (gegen Ãœberlappung mit Santa Ana/Cerro Verde)
    dy: 20   // â¬‡ï¸ leicht nach unten 
  },
  {
    title: "BahÃ­a de Jiquilisco",
    coords: [13.2000, -88.5000],
    subtitle: "Mangroven & BiosphÃ¤renreservat",
    text: "GroÃŸes Mangrovengebiet an der PazifikkÃ¼ste. Wichtig fÃ¼r Fischerei, KÃ¼stenschutz und viele Tierarten.",
    iconLocal: "images/BahÃ­a de Jiquilisco.jpg",
    imgUrl: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRKgQxZbWrEySf-WcA_7V065vetmCwzWdMJlw&s",
    dx: 10,    // â¡ï¸ leicht nach rechts (optional)
    dy: 10     // â¬‡ï¸ leicht nach unten (optional)
  },
  {
    title: "Nationalpark Montecristo",
    coords: [14.3906, -89.3847],
    subtitle: "Nebelwald & DreilÃ¤ndereck",
    text: "Feuchter Nebelwald im Grenzgebiet zu Guatemala und Honduras mit seltener Pflanzen- und Tierwelt.",
    iconLocal: "images/Nationalpark Montecristo.jpg",
    imgUrl: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSE1t5eWuOSxOBazaAYFaxvF51DISrBACIQ7Q&s",
    dx: -10,   // â¬…ï¸ leicht nach links (optional)
    dy: 12     // â¬‡ï¸ leicht nach unten (optional)
  }
];


  
  // ================= STRAND =================
const straende = [
  {
    title:"El Tunco",
    coords:[13.4927,-89.3816],
    iconLocal:"images/El Tunca - Strand.jpg",
    subtitle:"Pazifikstrand",
    text:"El Tunco ist ein bekannter Surfstrand mit schwarzem Vulkansand und markantem Felsen im Meer.",
    imgUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQj7nvMHqZyRQlgWTBUcFkuquRMN6vswgvBGA&s"
  },
  {
    title: "Costa del Sol",
    coords: [13.3450, -88.9300],
    subtitle: "Langer Sandstrand",
    text: "Beliebter Strand an der PazifikkÃ¼ste mit Tourismus, Fischerei und Lagunenlandschaft.",
    iconLocal: "images/Costa del Sol.jpg",
    imgUrl: "https://daytrip.imgix.net/Playa-Costa-del-Sol.jpg",
    dx: 14,    // â¡ï¸ etwas nach rechts (optional)
    dy: 0
  }
];

// ================= VULKANE =================
const vulkane = [
  {
    title:"Vulkan Santa Ana (Ilamatepec)",
    coords:[13.8536,-89.6300],
    iconLocal:"images/Vulkan Santa Ana.jpg",
    subtitle:"HÃ¶chster Vulkan des Landes",
    text:"Der Vulkan Santa Ana ist der hÃ¶chste Vulkan El Salvadors und besitzt einen Kratersee.",
    imgUrl:"https://betterbeyond.de/wp-content/uploads/2022/03/Santa-Ana-Volcano.jpg",
	dx:10, dy:0  // â¡ï¸â¬‡ï¸ nach rechts & unten verschoben
  },
  {
    title:"Vulkan San Miguel (Chaparrastique)",
    coords:[13.4347,-88.2694],
    iconLocal:"images/Vulkan San Miguel.jpg",
    subtitle:"Aktiver Vulkan im Osten",
    text:"Einer der aktivsten Vulkane El Salvadors mit regelmÃ¤ÃŸigen AusbrÃ¼chen.",
    imgUrl:"https://media.tacdn.com/media/attractions-splice-spp-674x446/0d/09/83/01.jpg"
  }
];

// ================= NATIONALPARKS =================
const nationalparks = [
  {
    title:"Nationalpark Cerro Verde",
    coords:[13.8239,-89.6256],
    iconLocal:"images/Cerro Verde.jpg",
    subtitle:"Vulkanlandschaft",
    text:"Der Nationalpark Cerro Verde bietet Ausblicke auf mehrere Vulkane und Wanderwege.",
    imgUrl:"https://cf.bstatic.com/xdata/images/hotel/max1024x768/318491098.webp?k=b2067e419d9e605e0c0d266455e9d5b1e3b654cad1001af8066ec704d45ae0ae&o=",
	dx:30, dy:20   // â¡ï¸â¬‡ï¸ nach rechts & unten verschoben
  },
  {
    title:"Nationalpark El Imposible",
    coords:[13.8375,-89.9397],
    iconLocal:"images/El Imposible Nationalpark.jpg",
    subtitle:"Regenwald & Tierwelt",
    text:"Der grÃ¶ÃŸte Nationalpark El Salvadors mit tropischem Regenwald und vielen Tierarten.",
    imgUrl:"https://thumbs.dreamstime.com/b/wasserfall-nationalpark-el-imposible-honduras-110551462.jpg"
  }
];
// ================= FLÃœSSE (MANUELL) =================

// HauptflÃ¼sse
const hauptfluesse = [
  {
    name: "RÃ­o Lempa",
    coords: [
      [14.32, -89.83],
      [14.10, -89.74],
      [13.95, -89.55],
      [13.80, -89.35],
      [13.68, -89.10],
      [13.55, -88.95],
      [13.40, -88.85],
      [13.30, -88.75]
    ],
    text: "Der RÃ­o Lempa ist der wichtigste Fluss El Salvadors."
  }
];

// NebenflÃ¼sse
const nebenfluesse = [
  {
    name: "RÃ­o Paz",
    coords: [
      [14.28, -89.95],
      [14.12, -89.86],
      [13.98, -89.78],
      [13.86, -89.72]
    ],
    text: "Grenzfluss zwischen El Salvador und Guatemala."
  },
  {
    name: "RÃ­o GoascorÃ¡n",
    coords: [
      [14.38, -89.18],
      [14.20, -89.08],
      [14.05, -88.98],
      [13.92, -88.90]
    ],
    text: "Grenzfluss zwischen El Salvador und Honduras."
  },
  {
    name: "RÃ­o Jiboa",
    coords: [
      [13.88, -89.20],
      [13.75, -89.05],
      [13.63, -88.92],
      [13.52, -88.80]
    ],
    text: "Nebenfluss im zentralen Bereich."
  }
];


  // ================= MARKER ERZEUGEN =================
  staedte.forEach(o => {
    L.marker(o.coords, { icon: makeImageDivIcon(o.iconLocal, 46, o.dx||0, o.dy||0) })
      .addTo(layerStaedte)
      .bindPopup(popupHTML(o));
  });

  kultur.forEach(o => {
    L.marker(o.coords, { icon: makeImageDivIcon(o.iconLocal, 46, o.dx||0, o.dy||0) })
      .addTo(layerKultur)
      .bindPopup(popupHTML(o));
  });

  natur.forEach(o => {
    // Natur auch als Bildmarker (hier speziell Lago)
    L.marker(o.coords, { icon: makeImageDivIcon(o.iconLocal, 46, o.dx||0, o.dy||0) })
      .addTo(layerNatur)
      .bindPopup(popupHTML(o));
  });

  besondereOrte.forEach(o => {
  const icon = o.iconLocal
    ? makeImageDivIcon(o.iconLocal, 46, o.dx||0, o.dy||0)
    : iconAlert;

  L.marker(o.coords, { icon })
    .addTo(layerBesondereOrte)
    .bindPopup(popupHTML(o));
});
weitereBesondereOrte.forEach(o => {
  L.marker(o.coords, {
    icon: makeImageDivIcon(o.iconLocal, 46, o.dx || 0, o.dy || 0)
  })
  .addTo(layerBesondereOrte)
  .bindPopup(popupHTML(o));
});

  
  // ================= STRAND-MARKER =================
straende.forEach(o => {
  L.marker(o.coords, {
    icon: makeImageDivIcon(o.iconLocal, 46, 0, 0)
  }).addTo(layerStrand).bindPopup(popupHTML(o));
});

// ================= VULKAN-MARKER =================
vulkane.forEach(o => {
  L.marker(o.coords, {
    icon: makeImageDivIcon(o.iconLocal, 46, 0, 0)
  }).addTo(layerNatur).bindPopup(popupHTML(o));
});

// ================= NATIONALPARK-MARKER =================
nationalparks.forEach(o => {
  const dy = (o.title === "Nationalpark Cerro Verde") ? 25 : 0;

  L.marker(o.coords, {
    icon: makeImageDivIcon(o.iconLocal, 46, 0, dy)
  }).addTo(layerNatur).bindPopup(popupHTML(o));
});

// ================= HAUPTFLÃœSSE =================
hauptfluesse.forEach(fluss => {
  L.polyline(fluss.coords, {
    color: "#1f6feb",
    weight: 3,        // etwas dicker
    opacity: 0.9
  })
  .addTo(layerHauptfluesse)
  .bindPopup(`<b>${fluss.name}</b><br>${fluss.text}`);
});

// ================= NEBENFLÃœSSE =================
nebenfluesse.forEach(fluss => {
  L.polyline(fluss.coords, {
    color: "#6ea8ff",
    weight: 1.5,      // dÃ¼nner
    opacity: 0.8,
    dashArray: "4,4"
  })
  .addTo(layerNebenfluesse)
  .bindPopup(`<b>${fluss.name}</b><br>${fluss.text}`);
});


  // ================= LAYER CONTROL =================
  L.control.layers(null, {
  "ğŸ™ï¸ StÃ¤dte": layerStaedte,
  "ğŸ›ï¸ SehenswÃ¼rdigkeiten": layerKultur,
  "ğŸŒ¿ Natur": layerNatur,
  "ğŸ–ï¸ Strand": layerStrand,
  "ğŸŸ¦ HauptflÃ¼sse": layerHauptfluesse,
  "ğŸŸ¦ NebenflÃ¼sse": layerNebenfluesse
}, { collapsed: false }).addTo(map);


  // ================= LEGENDE =================
const legend = L.control({ position: "topright" });

legend.onAdd = function () {
  const div = L.DomUtil.create("div", "legend");
  div.innerHTML = `
    <b>Legende</b><br>
    ğŸ™ï¸ StÃ¤dte (Bilder)<br>
    ğŸ›ï¸ SehenswÃ¼rdigkeiten (Bilder)<br>
    ğŸŒ¿ Natur / Parks / Vulkane<br>
    ğŸ–ï¸ StrÃ¤nde<br>
    â— Besondere Orte<br>
    <hr style="border:none;border-top:1px solid #eee;margin:8px 0;">
    <span style="border-top:3px solid #1f6feb;display:inline-block;width:30px"></span> Hauptfluss<br>
    <span style="border-top:2px dashed #6ea8ff;display:inline-block;width:30px"></span> Nebenfluss
  `;
  return div;
};
console.log("Legende wird hinzugefÃ¼gt");
console.log("Kurz vor legend.addTo(map) âœ…");

legend.addTo(map);


</script>
</body>
</html>
